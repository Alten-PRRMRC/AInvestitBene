import{b as R,c as p,d as W,e as P,f as j,g as f,h as B,i as X,k as Y,l as $,m as z,n as H,o as J,p as K,q as Q}from"./chunk-SF3IEPMS.js";import{a as U}from"./chunk-WVUI35JE.js";import"./chunk-S2L6OF43.js";import{c as M,d as O}from"./chunk-6E63MKT7.js";import{$a as h,Aa as w,Ib as I,Lb as G,Oa as a,Pa as s,Qa as D,R as y,Ra as N,Sa as V,Ta as u,Ua as i,Va as n,W as F,Wa as C,X as S,_a as T,a as E,bb as _,hb as l,jb as L,kb as b,lb as v,mb as g,ob as q,pb as A,qb as k,sa as r}from"./chunk-DR2BOYXC.js";var ee=()=>["/"];function te(t,o){t&1&&(i(0,"span"),l(1,"Description is required"),n())}function ne(t,o){t&1&&(i(0,"span"),l(1,"Description must be at least 3 characters"),n())}function ie(t,o){if(t&1&&(i(0,"section",8),a(1,te,2,0,"span"),a(2,ne,2,0,"span"),n()),t&2){_();let e=g(12);r(),s(!(e==null||e.errors==null)&&e.errors.required||!(e==null||e.errors==null)&&e.errors.noWhitespace?1:-1),r(),s(!(e==null||e.errors==null)&&e.errors.minlength&&!(!(e==null||e.errors==null)&&e.errors.noWhitespace)?2:-1)}}function oe(t,o){t&1&&(i(0,"span"),l(1,"Amount is required"),n())}function re(t,o){t&1&&(i(0,"span"),l(1,"Amount must be positive"),n())}function le(t,o){if(t&1&&(i(0,"section",8),a(1,oe,2,0,"span"),a(2,re,2,0,"span"),n()),t&2){_();let e=g(19);r(),s(!(e==null||e.errors==null)&&e.errors.required?1:-1),r(),s(!(e==null||e.errors==null)&&e.errors.min?2:-1)}}function ae(t,o){if(t&1&&(i(0,"option",13),l(1),A(2,"titlecase"),n()),t&2){let e=o.$implicit;u("value",e),r(),L(" ",k(2,2,e)," ")}}function se(t,o){t&1&&(i(0,"span"),l(1,"Date is required"),n())}function me(t,o){if(t&1&&(i(0,"section",8),a(1,se,2,0,"span"),n()),t&2){_();let e=g(33);r(),s(!(e==null||e.errors==null)&&e.errors.required?1:-1)}}var Z=class t{expenseService=y(U);router=y(M);categories=["fashion","groceries","cryptocurrency"];formDirty=!1;noWhitespaceValidator(o){return o.value.trim().length===0?{noWhitespace:!0}:null}expenseForm=new j({description:new f("",[p.required,p.minLength(3),this.noWhitespaceValidator]),import:new f(1,[p.required,p.min(1)]),category:new f(this.categories[0],[p.required]),date:new f(new Date,[p.required])});ngOnInit(){this.expenseForm.valueChanges.subscribe(()=>{this.formDirty=this.expenseForm.dirty})}onSubmit(){if(this.expenseForm.valid){let o=E({id:Date.now().toString()},this.expenseForm.value);o.date=new Date(o.date),this.expenseService.addItem(o),this.formDirty=!1,this.router.navigate(["/"])}}resetForm(){this.expenseForm.reset({description:"",import:1,category:this.categories[0],date:new Date}),this.formDirty=!1}canDeactivate(){return this.formDirty?new Promise(o=>{let e=window.confirm("You have unsaved changes. Do you really want to leave?");o(e)}):!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["expense-form"]],decls:40,vars:10,consts:[[1,"p-6","max-w-xl","mx-auto","bg-base-100","rounded-lg","shadow-md"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-base-content"],[1,"btn","btn-sm","btn-outline","btn-error",3,"routerLink"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","description",1,"label"],[1,"label-text"],["type","text","id","description","formControlName","description","placeholder","Enter expense description",1,"input","input-bordered","w-full","focus:outline-none"],[1,"bg-error","text-error-content","rounded-full","text-sm","mt-1"],["for","import",1,"label"],["type","number","id","import","formControlName","import","min","1","step","1",1,"input","input-bordered","w-full","focus:outline-none"],["for","category",1,"label"],["id","category","formControlName","category",1,"select","select-bordered","w-full","focus:outline-none"],[3,"value"],["for","date",1,"label"],["type","date","id","date","formControlName","date",1,"input","input-bordered","w-full","focus:outline-none"],[1,"flex","justify-end","gap-4","pt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-outline","btn-error",3,"click"]],template:function(e,m){if(e&1){let c=T();i(0,"section",0)(1,"section",1)(2,"h2",2),l(3,"Add New Expense"),n(),i(4,"a",3),l(5,"X"),n()(),i(6,"form",4),h("ngSubmit",function(){return F(c),S(m.onSubmit())}),i(7,"section")(8,"label",5)(9,"span",6),l(10,"Description"),n()(),C(11,"input",7),b(12),a(13,ie,3,2,"section",8),n(),i(14,"section")(15,"label",9)(16,"span",6),l(17,"Amount"),n()(),C(18,"input",10),b(19),a(20,le,3,2,"section",8),n(),i(21,"section")(22,"label",11)(23,"span",6),l(24,"Category"),n()(),i(25,"select",12),N(26,ae,3,4,"option",13,D),n()(),i(28,"section")(29,"label",14)(30,"span",6),l(31,"Date"),n()(),C(32,"input",15),b(33),a(34,me,2,1,"section",8),n(),i(35,"section",16)(36,"button",17),l(37," Save Expense "),n(),i(38,"button",18),h("click",function(){return F(c),S(m.resetForm())}),l(39," Reset "),n()()()()}if(e&2){r(4),u("routerLink",q(9,ee)),r(2),u("formGroup",m.expenseForm),r(6);let c=v(m.expenseForm.get("description"));r(),s(c!=null&&c.invalid&&(c!=null&&c.touched)?13:-1),r(6);let d=v(m.expenseForm.get("import"));r(),s(d!=null&&d.invalid&&(d!=null&&d.touched)?20:-1),r(6),V(m.categories),r(7);let x=v(m.expenseForm.get("date"));r(),s(x!=null&&x.invalid&&(x!=null&&x.touched)?34:-1),r(2),u("disabled",m.expenseForm.invalid)}},dependencies:[G,Q,B,H,J,R,X,z,W,P,K,Y,$,O,I],encapsulation:2})};export{Z as FormComponent};
