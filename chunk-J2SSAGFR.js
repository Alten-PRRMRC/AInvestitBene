import{b as W,c,d as j,e as B,f as X,g as x,h as Y,i as $,k as z,l as H,m as J,n as K,o as Q,p as U,q as Z}from"./chunk-W3BBPDPT.js";import{a as ee}from"./chunk-Y5NE2PVT.js";import"./chunk-MI3OHOBN.js";import{b as R,d as G,e as O}from"./chunk-Y7JRHZCN.js";import{$a as S,Ib as h,Kb as k,Na as s,Nb as P,Oa as m,Qa as N,R as v,Ra as V,Sa as T,Ta as p,Ua as o,Va as i,W as E,Wa as b,X as F,_a as q,a as D,bb as f,hb as l,jb as w,kb as y,lb as g,mb as _,ob as M,qb as A,ra as r,rb as I,za as L}from"./chunk-RLMCYDT2.js";var ne=()=>["/"];function ie(t,n){t&1&&(o(0,"span"),l(1,"Description is required"),i())}function oe(t,n){if(t&1&&(o(0,"span"),l(1),i()),t&2){f(2);let e=_(12);r(),w("Description must be at least ",e==null||e.errors==null?null:e.errors.minlength.requiredLength," characters")}}function re(t,n){if(t&1&&(o(0,"section",8),s(1,ie,2,0,"span"),s(2,oe,2,1,"span"),i()),t&2){f();let e=_(12);r(),m(!(e==null||e.errors==null)&&e.errors.required||!(e==null||e.errors==null)&&e.errors.noWhitespace?1:-1),r(),m(!(e==null||e.errors==null)&&e.errors.minlength&&!(!(e==null||e.errors==null)&&e.errors.noWhitespace)?2:-1)}}function le(t,n){t&1&&(o(0,"span"),l(1,"Amount is required"),i())}function ae(t,n){t&1&&(o(0,"span"),l(1,"Amount must be positive"),i())}function se(t,n){if(t&1&&(o(0,"section",8),s(1,le,2,0,"span"),s(2,ae,2,0,"span"),i()),t&2){f();let e=_(19);r(),m(!(e==null||e.errors==null)&&e.errors.required?1:-1),r(),m(!(e==null||e.errors==null)&&e.errors.min?2:-1)}}function me(t,n){if(t&1&&(o(0,"option",13),l(1),A(2,"titlecase"),i()),t&2){let e=n.$implicit;p("value",e),r(),w(" ",I(2,2,e)," ")}}function de(t,n){t&1&&(o(0,"span"),l(1,"Date is required"),i())}function ce(t,n){if(t&1&&(o(0,"section",8),s(1,de,2,0,"span"),i()),t&2){f();let e=_(33);r(),m(!(e==null||e.errors==null)&&e.errors.required?1:-1)}}function ue(t){return t.value.trim().length===0?{noWhitespace:!0}:null}var te=class t{_expenseService=v(ee);_route=v(R);_router=v(G);_formDirty=!1;_currentExpense;categories=["fashion","groceries","cryptocurrency"];expenseForm=new X({description:new x("",[c.required,c.minLength(2),ue]),import:new x(1,[c.required,c.min(1)]),category:new x(this.categories[0],[c.required]),date:new x(h(Date.now(),"yyyy-MM-dd","en"),[c.required])});ngOnInit(){this.expenseForm.valueChanges.subscribe(()=>{this._formDirty=this.expenseForm.dirty}),this._route.queryParams.subscribe(n=>{let e=n.id||void 0;this._currentExpense=this._expenseService.getById(e),this.resetForm(this._currentExpense)})}onSubmit(){if(!this.expenseForm.valid)return;let n=D({id:Date.now().toString()},this.expenseForm.value);n.date=new Date(n.date),this._currentExpense?(n.id=this._currentExpense.id,this._expenseService.updateItem(n)):this._expenseService.addItem(n),this._formDirty=!1,this._router.navigate(["/"])}resetForm(n){let e={description:"",import:1,category:this.categories[0],date:h(Date.now(),"yyyy-MM-dd","en")},a=n?{description:n.description,import:n.import,category:n.category,date:h(n.date,"yyyy-MM-dd","en")}:e;this.expenseForm.reset(a),this._formDirty=!1}canDeactivate(){return this._formDirty?new Promise(n=>{let e=window.confirm("You have unsaved changes. Do you really want to leave?");n(e)}):!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=L({type:t,selectors:[["expense-form"]],decls:40,vars:10,consts:[[1,"p-6","max-w-xl","mx-auto","bg-base-100","rounded-lg","shadow-md"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-base-content"],[1,"btn","btn-sm","btn-outline","btn-error",3,"routerLink"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","description",1,"label"],[1,"label-text"],["type","text","id","description","formControlName","description","placeholder","Enter expense description",1,"input","input-bordered","w-full","focus:outline-none"],[1,"bg-error","text-error-content","rounded-full","text-sm","mt-1"],["for","import",1,"label"],["type","number","id","import","formControlName","import","min","1","step","1",1,"input","input-bordered","w-full","focus:outline-none"],["for","category",1,"label"],["id","category","formControlName","category",1,"select","select-bordered","w-full","focus:outline-none"],[3,"value"],["for","date",1,"label"],["type","date","id","date","formControlName","date",1,"input","input-bordered","w-full","focus:outline-none"],[1,"flex","justify-end","gap-4","pt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-outline","btn-error",3,"click"]],template:function(e,a){if(e&1){let d=q();o(0,"section",0)(1,"section",1)(2,"h2",2),l(3,"Add New Expense"),i(),o(4,"a",3),l(5,"X"),i()(),o(6,"form",4),S("ngSubmit",function(){return E(d),F(a.onSubmit())}),o(7,"section")(8,"label",5)(9,"span",6),l(10,"Description"),i()(),b(11,"input",7),y(12),s(13,re,3,2,"section",8),i(),o(14,"section")(15,"label",9)(16,"span",6),l(17,"Amount"),i()(),b(18,"input",10),y(19),s(20,se,3,2,"section",8),i(),o(21,"section")(22,"label",11)(23,"span",6),l(24,"Category"),i()(),o(25,"select",12),V(26,me,3,4,"option",13,N),i()(),o(28,"section")(29,"label",14)(30,"span",6),l(31,"Date"),i()(),b(32,"input",15),y(33),s(34,ce,2,1,"section",8),i(),o(35,"section",16)(36,"button",17),l(37," Save Expense "),i(),o(38,"button",18),S("click",function(){return E(d),F(a.resetForm())}),l(39," Reset "),i()()()()}if(e&2){r(4),p("routerLink",M(9,ne)),r(2),p("formGroup",a.expenseForm),r(6);let d=g(a.expenseForm.get("description"));r(),m(d!=null&&d.invalid&&(d!=null&&d.touched)?13:-1),r(6);let u=g(a.expenseForm.get("import"));r(),m(u!=null&&u.invalid&&(u!=null&&u.touched)?20:-1),r(6),T(a.categories),r(7);let C=g(a.expenseForm.get("date"));r(),m(C!=null&&C.invalid&&(C!=null&&C.touched)?34:-1),r(2),p("disabled",a.expenseForm.invalid)}},dependencies:[P,Z,Y,K,Q,W,$,J,j,B,U,z,H,O,k],encapsulation:2})};export{te as FormComponent};
